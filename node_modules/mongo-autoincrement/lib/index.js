"use strict";
const defaultCollectionName = 'counters';
const defaultStep = 1;
async function autoIncrement(db, collection, field, { filter, collectionName = defaultCollectionName, step = defaultStep, session } = {}) {
    const result = await db.collection(collectionName).findOneAndUpdate(Object.assign({ collection,
        field }, filter), { $inc: { current: step } }, { upsert: true, returnOriginal: false, session });
    return result.value && result.value.current;
}
module.exports = autoIncrement;
